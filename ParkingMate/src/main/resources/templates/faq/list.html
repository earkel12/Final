<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>자주하는 질문</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      margin-bottom: 20px;
    }

    .faq-item {
      border-bottom: 1px solid #ccc;
      padding: 10px 0;
      cursor: pointer;
    }

    .faq-question {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .faq-answer {
      display: none;
      padding-left: 20px;
      color: #333;
    }

    #writeBtn {
      display: inline-block;
      margin-bottom: 20px;
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      text-decoration: none;
    }

    #writeBtn:hover {
      background-color: #0056b3;
    }
  </style>
  
  
  <script>
    function Answer(element) {
      const answer = element.querySelector(".faq-answer");
      const isVisible = answer.style.display === "block";

      // 모든 FAQ를 접기
      document.querySelectorAll(".faq-answer").forEach(el => el.style.display = "none");

      // 클릭한 항목만 펼치기 (이미 펼쳐져 있으면 접기)
      if (!isVisible) {
        answer.style.display = "block";
        
      }
    }
  </script>
</head>
<body>

  <h1>자주하는 질문</h1>
  <!-- 관리자 글쓰기 버튼 -->
  <div class = "editWriteBtn" th:if = "${userid == 'admin'}">
  <a id="writeBtn" href = "faqWrite">글쓰기</a>
</div>
  <!-- FAQ 목록 -->
  <div th:each = "faq : ${list}" class="faq-item" onclick="Answer(this)">
    <div class="faq-question" th:text = "'Q. ' + ${faq.question}"></div>
    <!-- 답변 + (관리자일 경우) 수정 버튼 포함 -->
  <div class="faq-answer">
    <span th:text="'A. ' + ${faq.answer}"></span>
    
    <!-- 관리자만 보이는 수정 버튼 -->
    <span th:if="${userid == 'admin'}" style="margin-left: 20px;">
      <a th:href="@{/faqEdit(idx=${faq.idx})}" onclick="event.stopPropagation()">수정</a>
    </span>
    <span th:if = "${userid == 'admin'}" style = "margin-left:20px;">
    	<a th:href = "@{/faqDelete(idx=${faq.idx})}" onclick = "return confirm('삭제하시겠습니까?');">삭제</a>
    </span>
  </div>
  </div>
<div class = "location">
	<a href = "/">돌아가기</a>
</div>
</body>
</html>
