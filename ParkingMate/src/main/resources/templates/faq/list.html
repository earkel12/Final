<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>자주하는 질문</title>
  <link rel="stylesheet" th:href="@{/css/faq/faqList.css}">
  <script>
    function Answer(element) {
      const answer = element.querySelector(".faq-answer");
      const isVisible = answer.style.display === "block";
      document.querySelectorAll(".faq-answer").forEach(el => el.style.display = "none");
      if (!isVisible) answer.style.display = "block";
    }
  </script>
</head>
<body>
  <header th:include="@{/header}" class="full-width-header"></header>

  <main class="faq-container">
    <h1>자주하는 질문</h1>

    <div class="editWriteBtn" th:if="${userid == 'admin'}">
      <a id="writeBtn" href="faqWrite">글쓰기</a>
    </div>

    <div th:each="faq : ${list}" class="faq-item" onclick="Answer(this)">
      <div class="faq-question" th:text="'Q. ' + ${faq.question}"></div>
      <div class="faq-answer">
        <span th:text="'A. ' + ${faq.answer}"></span>

        <span th:if="${userid == 'admin'}" class="admin-actions">
          <a th:href="@{/faqEdit(idx=${faq.idx})}" onclick="event.stopPropagation()">수정</a>
          <a th:href="@{/faqDelete(idx=${faq.idx})}" onclick="return confirm('삭제하시겠습니까?'); event.stopPropagation();">삭제</a>
        </span>
      </div>
    </div>

    <div class="location">
      <a href="/">돌아가기</a>
    </div>
  </main>

  <footer th:include="@{/footer}" class="full-width-footer"></footer>
</body>
</html>
