<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>GPS + 카카오 지도 예제</title>
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=bef1fdbfb5b4d0c4519859a35fd0e1c4&autoload=false"></script>
<style>
  #map {
    width: 100%;
    height: 400px;
    border: 1px solid #ccc;
    border-radius: 10px;
  }
</style>
</head>
<body>
<h1>내 현재 위치 지도 표시</h1>
<div id="map"></div>

<script>
  kakao.maps.load(function() {
    // 기본 지도 위치 (서울 시청)
    const defaultPos = new kakao.maps.LatLng(37.5665, 126.9780);
    const map = new kakao.maps.Map(document.getElementById('map'), {
      center: defaultPos,
      level: 5
    });

    // GPS 지원 여부 확인
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;
        const currentPos = new kakao.maps.LatLng(lat, lng);

        // 지도 중심을 현재 위치로 이동
        map.setCenter(currentPos);

        // 현재 위치 마커 생성 (파란색 마커)
        const markerImage = new kakao.maps.MarkerImage(
          'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png',
          new kakao.maps.Size(24, 35)
        );
        const marker = new kakao.maps.Marker({
          position: currentPos,
          image: markerImage,
          map: map,
          title: '현재 위치'
        });

      }, function(error) {
        alert('위치 정보를 가져오지 못했습니다. 기본 위치로 표시합니다.');
      });
    } else {
      alert('이 브라우저는 위치 정보를 지원하지 않습니다.');
    }
  });
</script>
</body>
</html>