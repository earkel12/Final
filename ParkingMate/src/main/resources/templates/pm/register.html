<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>파킹메이트 등록</title>
<th:block th:include="@{/header}"></th:block>
<style>
body {
	font-family: 'Segoe UI', '맑은 고딕', sans-serif;
	background-color: #f5f7fa;
	color: #2c3e50;
	margin: 0;
}

main {
	max-width: 800px;
	margin: 50px auto;
	padding: 0 20px;
}

h1 {
	font-size: 28px;
	margin-bottom: 25px;
	border-left: 5px solid #B1B2FF;
	padding-left: 15px;
	color: #1a1a1a;
}

form {
	background-color: #ffffff;
	padding: 30px;
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
}

table {
	width: 100%;
	border-collapse: collapse;
}

th {
	text-align: left;
	padding: 12px 10px;
	width: 30%;
	vertical-align: top;
	color: #444;
}

td {
	padding: 12px 10px;
}

select {
	width: 100%;
	padding: 10px;
	font-size: 15px;
	border: 1.5px solid #ccc;
	border-radius: 6px;
	background-color: #fff;
	color: #2c3e50;
	transition: border-color 0.3s ease;
	appearance: none;
	-webkit-appearance: none;
	-moz-appearance: none;
	background-image:
		url("data:image/svg+xml;utf8,<svg fill='gray' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
	background-repeat: no-repeat;
	background-position: right 10px center;
	background-size: 16px 16px;
}

select:focus {
	outline: none;
	border-color: #6C72FF;
	box-shadow: 0 0 6px #aab2ff88;
}

input[type="text"] {
	width: 100%;
	padding: 10px;
	font-size: 15px;
	border: 1.5px solid #ccc;
	border-radius: 6px;
	transition: border-color 0.3s ease;
}

input[type="text"]:focus {
	border-color: #6C72FF;
	outline: none;
	box-shadow: 0 0 6px #aab2ff88;
}

.button-wrap {
	text-align: center;
	padding-top: 20px;
}

button {
	padding: 10px 25px;
	font-weight: bold;
	font-size: 15px;
	border-radius: 6px;
	border: none;
	cursor: pointer;
	background-color: #6C72FF;
	color: white;
	transition: background-color 0.3s ease;
}

button:hover {
	background-color: #555bff;
}

.back-link {
	display: block;
	margin-top: 25px;
	text-align: center;
	font-size: 14px;
	color: #6C72FF;
	text-decoration: none;
}

.back-link:hover {
	text-decoration: underline;
}

.cancel-button {
	background-color: #AAC4FF;
	color: #1a1a1a;
	margin-left: 12px;
}

.cancel-button:hover {
	background-color: #B1B2FF;
}
</style>
</head>
<body>

	<main>
		<h1>파킹메이트 등록</h1>
		<form id="parkingMateForm" action="/pm/register" method="post"
			enctype="multipart/form-data">
			<table>
				<tr>
					<th><label for="license">차량 번호</label></th>
					<td><input type="text" id="license" name="license" required
						placeholder="예: 12가3456 또는 123가4567"
						pattern="^\d{2,3}[가-힣]{1}\d{4}$"
						title="예: 12가3456 또는 123가4567 형태로 입력하세요." /></td>
				</tr>
				<tr>
					<th><label for="history">차량 이력</label></th>
					<td><textarea id="history" name="history" rows="3"
							style="width: 100%;"></textarea></td>
				</tr>
				<tr>
					<th><label for="picture">차량 사진</label></th>
					<td><input type="file" id="picture" name="pictureFile"
						accept="image/*" onchange="previewImage(event)" /> <br /> <img
						id="preview"
						style="display: none; margin-top: 10px; max-width: 300px; border: 1px solid #ccc; border-radius: 6px;"
						alt="미리보기" /></td>
				</tr>
				<tr>
					<th><label for="addr">주소</label></th>
					<td><input type="text" id="addr" name="addr" required /></td>
				</tr>
				<tr>
					<th><label for="bank">은행명</label></th>
					<td><select id="bank" name="bank" required>
							<option value="">은행 선택</option>
							<option value="국민은행">국민은행</option>
							<option value="신한은행">신한은행</option>
							<option value="우리은행">우리은행</option>
							<option value="하나은행">하나은행</option>
							<option value="농협은행">농협은행</option>
							<option value="기업은행">기업은행</option>
							<option value="SC제일은행">SC제일은행</option>
							<option value="한국씨티은행">한국씨티은행</option>
							<option value="카카오뱅크">카카오뱅크</option>
							<option value="토스뱅크">토스뱅크</option>
							<option value="부산은행">부산은행</option>
							<option value="대구은행">대구은행</option>
							<option value="광주은행">광주은행</option>
							<option value="전북은행">전북은행</option>
							<option value="경남은행">경남은행</option>
							<option value="제주은행">제주은행</option>
							<option value="수협은행">수협은행</option>
							<option value="산업은행">산업은행</option>
							<option value="우체국">우체국</option>
					</select></td>
				</tr>
				<tr>
					<th><label for="account">계좌번호</label></th>
					<td><input type="text" id="account" name="account"
						placeholder="계좌번호를 입력하세요" maxlength="20" required
						oninput="formatAccountNumber(this)" /></td>
				</tr>
			</table>
			<div class="button-wrap">
				<button type="submit">등록</button>
				<button type="button" class="cancel-button"
					onclick="location.href='/'">취소</button>
			</div>
		</form>
	</main>
</body>
<script>
	window.onload = function() {
		alert('파킹메이트 등록은 처음 1회만 진행됩니다.\n이후 정보 수정은 파킹메이트 등록 페이지에서 수정 가능합니다.');
	}

	function formatAccountNumber(input) {
		let value = input.value.replace(/\D/g, '');

		let formatted = '';
		if (value.length <= 3) {
			formatted = value;
		} else if (value.length <= 6) {
			formatted = value.slice(0, 3) + '-' + value.slice(3);
		} else if (value.length <= 11) {
			formatted = value.slice(0, 3) + '-' + value.slice(3, 5) + '-'
					+ value.slice(5);
		} else {
			formatted = value.slice(0, 3) + '-' + value.slice(3, 5) + '-'
					+ value.slice(5, 11);
		}

		input.value = formatted;
	}
	function previewImage(event) {
		const file = event.target.files[0];
		const preview = document.getElementById('preview');

		if (file && file.type.startsWith('image/')) {
			const reader = new FileReader();
			reader.onload = function(e) {
				preview.src = e.target.result;
				preview.style.display = 'block';
			};
			reader.readAsDataURL(file);
		} else {
			preview.src = '#';
			preview.style.display = 'none';
		}
	}
	document.getElementById('parkingMateForm').addEventListener('submit',
			function(e) {
				const accountInput = document.getElementById('account');
				accountInput.value = accountInput.value.replace(/-/g, ''); // 하이픈 제거
			});
</script>
<th:block th:include="@{/footer}"></th:block>
</html>
